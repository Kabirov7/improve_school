(this.webpackJsonpimprove_school=this.webpackJsonpimprove_school||[]).push([[0],{74:function(e,t,c){},75:function(e,t,c){},84:function(e,t,c){"use strict";c.r(t);var n=c(1),a=c.n(n),o=c(16),s=c.n(o),i=(c(74),c(75),c(32)),r=c(11),l=c(22),j=c(37);j.a.initializeApp({apiKey:"AIzaSyCs4wBkenI3_mQKkJupWe_0rG6hOMcBif0",authDomain:"improve-school.firebaseapp.com",projectId:"improve-school",storageBucket:"improve-school.appspot.com",messagingSenderId:"1053936762649",appId:"1:1053936762649:web:768c2d2828768b01fecf88",measurementId:"G-FGZQ895MFF"});var u=new j.a.auth.GoogleAuthProvider,b=j.a,h=c(6),d=a.a.createContext(),O=function(e){var t=e.children,c=Object(n.useState)(null),a=Object(l.a)(c,2),o=a[0],s=a[1];return Object(n.useEffect)((function(){b.auth().onAuthStateChanged(s)}),[]),Object(h.jsx)(d.Provider,{value:{currentUser:o},children:t})},m=c(127),f=c(122),x=c(118),p=Object(x.a)({button:{marginTop:50},title:{fontSize:10,marginTop:20}}),g=function(e){e.history;var t=p();return Object(n.useContext)(d).currentUser?Object(h.jsx)(r.a,{to:"/improve_school/"}):Object(h.jsxs)("div",{children:[Object(h.jsx)(m.a,{className:t.button,onClick:function(){j.a.auth().signInWithPopup(u)},variant:"contained",color:"secondary",children:"Log in"}),Object(h.jsxs)(f.a,{className:t.title,color:"textSecondary",component:"p",children:["\u0414\u0430\u043d\u043d\u043e\u0435 \u0432\u0435\u0431 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u0441\u043e\u0437\u0434\u0430\u043d\u043d\u043e \u0434\u043b\u044f \u0442\u043e\u0433\u043e \u0447\u0442\u043e\u0431\u044b \u043b\u044e\u0431\u043e\u0439 \u0443\u0447\u0435\u043d\u0438\u043a \u0438\u043b\u0438 \u0443\u0447\u0430\u0449\u0438\u0439\u0441\u044f \u043c\u043e\u0433 \u0440\u0430\u0441\u0441\u043a\u0430\u0437\u0430\u0442\u044c \u0447\u0442\u043e-\u0442\u043e \u043f\u0440\u043e \u0435\u0433\u043e \u0448\u043a\u043e\u043b\u0443. \u0412\u0441\u0451 100% \u0430\u043d\u043e\u043d\u0438\u043c\u043d\u043e. ",Object(h.jsx)("br",{}),"(\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0441 \u0446\u0435\u043b\u044c\u044e \u0443\u0441\u0442\u0440\u0430\u043d\u0435\u043d\u0438\u044f \u0437\u0430\u0434\u0432\u043e\u0435\u043d\u0438\u0439)"]})]})},v=c(128),S=c(123),C=c(126),y=Object(x.a)((function(e){return Object(v.a)({root:{"& .MuiTextField-root":{margin:e.spacing(1),width:"25ch"}}})})),T=function(e){y();var t=Object(n.useState)(""),c=Object(l.a)(t,2),a=c[0],o=c[1];return Object(h.jsx)(C.a,{label:e.label,id:e.id,onChange:function(t){o(t.target.value),e.returnAnswer(t.target.value)},value:a})},D=Object(x.a)((function(e){return Object(v.a)({})})),w=function(){var e=Object(n.useState)(""),t=Object(l.a)(e,2),c=t[0],a=t[1],o=Object(n.useState)(""),s=Object(l.a)(o,2),i=s[0],j=s[1],u=Object(n.useState)(""),O=Object(l.a)(u,2),x=O[0],p=O[1],g=Object(n.useState)(),v=Object(l.a)(g,2),y=v[0],w=v[1],k=Object(n.useState)(),W=Object(l.a)(k,2),A=W[0],B=W[1],I=Object(n.useContext)(d).currentUser,F=(D(),Object(r.f)());Object(n.useEffect)((function(){var e=b.firestore().collection("users").doc(I.uid);e.get().then((function(t){if(t.exists)e.onSnapshot((function(e){var t=new Date>e.data().lastWrite.toDate();w(t)}));else{var c=new Date;c.setDate(c.getDate()-12),e.set({email:I.email,lastWrite:b.firestore.Timestamp.fromDate(c)}),w(!0)}}))}),[]),Object(n.useEffect)((function(){b.firestore().collection("users").doc(I.uid).get().then((function(e){var t=new Date>e.data().lastWrite.toDate();w(t),console.log("ddd => ",t),console.log("setAvailableWrite => ",y)}))}),[A]);return Object(h.jsxs)("div",{style:{marginTop:40},children:[Object(h.jsxs)(S.a,{container:!0,spacing:3,children:[Object(h.jsx)(S.a,{item:!0,xs:4,children:Object(h.jsx)(T,{label:"School",id:"school",returnAnswer:function(e){a(e)}})}),Object(h.jsx)(S.a,{item:!0,xs:4,children:Object(h.jsx)(T,{label:"\u0422\u0435\u043c\u0430",id:"subject",returnAnswer:function(e){p(e)},helperText:"HashTag (#lovlymath)"})})]}),Object(h.jsxs)(S.a,{container:!0,spacing:3,children:[Object(h.jsx)(S.a,{item:!0,xs:9,children:Object(h.jsx)(C.a,{style:{margin:20},id:"message",label:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f",value:i,onChange:function(e){j(e.target.value)},multiline:!0,rows:5,variant:"outlined",helperText:"\u0414\u043b\u0438\u043d\u0430 \u0442\u0435\u043a\u0441\u0442\u0430(".concat(i.length,") \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c > 50 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"),fullWidth:!0})}),Object(h.jsx)(S.a,{item:!0,xs:9,children:y?Object(h.jsx)("div",{}):Object(h.jsx)(f.a,{children:" \u0412\u044b \u0443\u0436\u0435 \u0440\u0430\u0441\u0441\u043a\u0430\u0437\u044b\u0432\u0430\u043b\u0438 \u0438\u0441\u0442\u043e\u0440\u0438\u044e \u0441\u0435\u0433\u043e\u0434\u043d\u044f"})})]}),Object(h.jsx)(S.a,{container:!0,spacing:3,children:Object(h.jsx)(S.a,{item:!0,xs:9,children:Object(h.jsx)(m.a,{variant:"contained",color:"primary",onClick:function(){return function(){var e=new Date;e.setDate(e.getDate()+1);var t,n=!0,a=b.firestore(),o={school:c,subject:x,message:i,email:I.email,created:b.firestore.Timestamp.fromDate(e)};-1==x.indexOf(" ")&&0==x.indexOf("#")&&(t=!1),i.length>=50&&(n=!1),t||n||!y||A||(a.collection("messages").doc().set(o).then(),a.collection("users").doc(I.uid).set({email:I.email,lastWrite:b.firestore.Timestamp.fromDate(e)}),console.log("save"),B(!0))}()},children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0438\u0441\u0442\u043e\u0440\u0438\u044e"})})}),Object(h.jsx)(S.a,{container:!0,style:{marginTop:30},spacing:15,children:Object(h.jsx)(S.a,{item:!0,xs:9,children:Object(h.jsx)(m.a,{color:"primary",className:"px-4",onClick:function(){F.push("/comments")},children:"\u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0432\u0441\u0435 \u0438\u0441\u0442\u043e\u0440\u0438\u0438"})})}),Object(h.jsx)(S.a,{container:!0,style:{marginTop:30},spacing:15,children:Object(h.jsx)(S.a,{item:!0,xs:9,children:Object(h.jsx)(m.a,{onClick:function(){return b.auth().signOut()},children:"Log out"})})})]})},k=c(124),W=c(125),A=Object(x.a)({root:{minWidth:275},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},title:{fontSize:14,fontWeight:700},pos:{marginBottom:12},container:{marginTop:20}}),B=function(e){var t=A();return Object(h.jsx)("div",{className:t.container,children:Object(h.jsx)(k.a,{children:Object(h.jsxs)(W.a,{children:[Object(h.jsxs)(f.a,{className:t.title,color:"black",gutterBottom:!0,children:["School: ",e.school]}),Object(h.jsxs)(f.a,{className:t.title,color:"black",gutterBottom:!0,children:["HashTag: ",e.subject]}),Object(h.jsx)(f.a,{variant:"body2",component:"p",children:e.message})]})})})},I=function(){var e=Object(n.useState)([]),t=Object(l.a)(e,2),c=t[0],a=t[1],o=(Object(n.useContext)(d).currentUser,Object(r.f)());Object(n.useEffect)((function(){b.firestore().collection("messages").orderBy("created","desc").onSnapshot((function(e){var t=[];e.forEach((function(e){t.push(e.data())})),a(t)}))}),[]);return Object(n.useEffect)((function(){console.log(c)}),[c]),Object(h.jsxs)("div",{children:[Object(h.jsx)(m.a,{color:"primary",className:"px-4",onClick:function(){o.push("improve_school")},children:"Create Comments"}),c.map((function(e,t){return Object(h.jsx)(B,{school:e.school,subject:e.subject,message:e.message})}))]})},F=c(46),N=c(60),E=function(e){var t=e.component,c=Object(N.a)(e,["component"]),a=Object(n.useContext)(d).currentUser;return Object(h.jsx)(r.b,Object(F.a)(Object(F.a)({},c),{},{render:function(e){return a?Object(h.jsx)(t,Object(F.a)({},e)):Object(h.jsx)(r.a,{to:"/login"})}}))};var _=function(){return Object(h.jsx)(O,{children:Object(h.jsx)(i.a,{children:Object(h.jsxs)("div",{className:"App",children:[Object(h.jsx)(E,{exact:!0,path:"/improve_school",component:w}),Object(h.jsx)(r.b,{exact:!0,path:"/comments",component:I}),Object(h.jsx)(r.b,{exact:!0,path:"/login",component:g})]})})})},P=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,130)).then((function(t){var c=t.getCLS,n=t.getFID,a=t.getFCP,o=t.getLCP,s=t.getTTFB;c(e),n(e),a(e),o(e),s(e)}))};s.a.render(Object(h.jsx)(a.a.StrictMode,{children:Object(h.jsx)(_,{})}),document.getElementById("root")),P()}},[[84,1,2]]]);
//# sourceMappingURL=main.40a5e99e.chunk.js.map