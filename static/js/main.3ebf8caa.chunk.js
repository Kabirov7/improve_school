(this.webpackJsonpimprove_school=this.webpackJsonpimprove_school||[]).push([[0],{76:function(e,t,c){},77:function(e,t,c){},86:function(e,t,c){"use strict";c.r(t);var n=c(1),o=c.n(n),a=c(16),s=c.n(a),r=(c(76),c(77),c(33)),i=c(11),l=c(22),j=c(38);j.a.initializeApp({apiKey:"AIzaSyCs4wBkenI3_mQKkJupWe_0rG6hOMcBif0",authDomain:"improve-school.firebaseapp.com",projectId:"improve-school",storageBucket:"improve-school.appspot.com",messagingSenderId:"1053936762649",appId:"1:1053936762649:web:768c2d2828768b01fecf88",measurementId:"G-FGZQ895MFF"});var u=new j.a.auth.GoogleAuthProvider,b=j.a,h=c(6),d=o.a.createContext(),m=function(e){var t=e.children,c=Object(n.useState)(null),o=Object(l.a)(c,2),a=o[0],s=o[1];return Object(n.useEffect)((function(){b.auth().onAuthStateChanged(s)}),[]),Object(h.jsx)(d.Provider,{value:{currentUser:a},children:t})},O=c(129),p=c(87),x=c(120),f=Object(x.a)({button:{marginTop:50},title:{fontSize:10,marginTop:20}}),g=function(e){e.history;var t=f();return Object(n.useContext)(d).currentUser?Object(h.jsx)(i.a,{to:"/improve_school/"}):Object(h.jsxs)("div",{children:[Object(h.jsx)(O.a,{className:t.button,onClick:function(){j.a.auth().signInWithPopup(u)},variant:"contained",color:"secondary",children:"Log in"}),Object(h.jsxs)(p.a,{className:t.title,color:"textSecondary",component:"p",children:["\u0414\u0430\u043d\u043d\u043e\u0435 \u0432\u0435\u0431 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u0441\u043e\u0437\u0434\u0430\u043d\u043d\u043e \u0434\u043b\u044f \u0442\u043e\u0433\u043e \u0447\u0442\u043e\u0431\u044b \u043b\u044e\u0431\u043e\u0439 \u0443\u0447\u0435\u043d\u0438\u043a \u0438\u043b\u0438 \u0443\u0447\u0430\u0449\u0438\u0439\u0441\u044f \u043c\u043e\u0433 \u0440\u0430\u0441\u0441\u043a\u0430\u0437\u0430\u0442\u044c \u0447\u0442\u043e-\u0442\u043e \u043f\u0440\u043e \u0435\u0433\u043e \u0448\u043a\u043e\u043b\u0443. \u0412\u0441\u0451 100% \u0430\u043d\u043e\u043d\u0438\u043c\u043d\u043e. ",Object(h.jsx)("br",{}),"(\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0441 \u0446\u0435\u043b\u044c\u044e \u0443\u0441\u0442\u0440\u0430\u043d\u0435\u043d\u0438\u044f \u0437\u0430\u0434\u0432\u043e\u0435\u043d\u0438\u0439)"]})]})},v=c(130),S=c(125),C=c(128),T=c(124),y=Object(x.a)((function(e){return Object(v.a)({root:{"& .MuiTextField-root":{margin:e.spacing(1),width:"25ch"}}})})),D=function(e){y();var t=Object(n.useState)(""),c=Object(l.a)(t,2),o=c[0],a=c[1];return Object(h.jsx)(C.a,{label:e.label,id:e.id,onChange:function(t){a(t.target.value),e.returnAnswer(t.target.value)},value:o,helperText:e.helperText,InputProps:{startAdornment:Object(h.jsx)(T.a,{position:"start",children:e.label})}})},w=Object(x.a)((function(e){return Object(v.a)({})})),k=function(){var e=Object(n.useState)(""),t=Object(l.a)(e,2),c=t[0],o=t[1],a=Object(n.useState)(""),s=Object(l.a)(a,2),r=s[0],j=s[1],u=Object(n.useState)(""),m=Object(l.a)(u,2),x=m[0],f=m[1],g=Object(n.useState)(),v=Object(l.a)(g,2),y=v[0],k=v[1],A=Object(n.useState)(),I=Object(l.a)(A,2),W=I[0],B=I[1],F=Object(n.useContext)(d).currentUser,N=(w(),Object(i.f)());Object(n.useEffect)((function(){var e=b.firestore().collection("users").doc(F.uid);e.get().then((function(t){if(t.exists)e.onSnapshot((function(e){var t=new Date>e.data().lastWrite.toDate();k(t)}));else{var c=new Date;c.setDate(c.getDate()-12),e.set({email:F.email,lastWrite:b.firestore.Timestamp.fromDate(c)}),k(!0)}}))}),[]),Object(n.useEffect)((function(){b.firestore().collection("users").doc(F.uid).get().then((function(e){var t=new Date>e.data().lastWrite.toDate();k(t),console.log("ddd => ",t),console.log("setAvailableWrite => ",y)}))}),[W]);return Object(h.jsxs)("div",{children:[Object(h.jsxs)(S.a,{container:!0,spacing:3,children:[Object(h.jsx)(S.a,{item:!0,xs:4,children:Object(h.jsx)(D,{label:"School",id:"school",returnAnswer:function(e){o(e)},helperText:"School name (\u0428\u0413 \u21161, \u0428\u0413 #1)",InputProps:{startAdornment:Object(h.jsx)(T.a,{position:"start",children:"School"})}})}),Object(h.jsx)(S.a,{item:!0,xs:4,children:Object(h.jsx)(D,{label:"Subject",id:"subject",returnAnswer:function(e){f(e)},helperText:"HashTag (#lovlymath)",InputProps:{startAdornment:Object(h.jsx)(T.a,{position:"start",children:"School"})}})})]}),Object(h.jsxs)(S.a,{container:!0,spacing:3,children:[Object(h.jsx)(S.a,{item:!0,xs:9,children:Object(h.jsx)(C.a,{style:{margin:20},id:"message",label:"Message",value:r,onChange:function(e){j(e.target.value)},multiline:!0,rows:5,variant:"outlined",helperText:"Length of the text(".concat(r.length,") must be > 140 char"),fullWidth:!0})}),Object(h.jsx)(S.a,{item:!0,xs:9,children:y?Object(h.jsx)("div",{}):Object(h.jsx)(p.a,{children:" \u0412\u044b \u0443\u0436\u0435 \u043f\u0438\u0441\u0430\u043b\u0438 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u0441\u0435\u0433\u043e\u0434\u043d\u044f"})})]}),Object(h.jsx)(S.a,{container:!0,spacing:3,children:Object(h.jsx)(S.a,{item:!0,xs:9,children:Object(h.jsx)(O.a,{variant:"contained",color:"primary",onClick:function(){return function(){var e=new Date;e.setDate(e.getDate()+1);var t,n=!0,o=b.firestore(),a={school:c,subject:x,message:r,email:F.email,created:b.firestore.Timestamp.fromDate(e)};-1==x.indexOf(" ")&&0==x.indexOf("#")&&(t=!1),r.length>=140&&(n=!1),console.log("is it able =>",y),t||n||!y||W||(o.collection("messages").doc().set(a).then(),o.collection("users").doc(F.uid).set({email:F.email,lastWrite:b.firestore.Timestamp.fromDate(e)}),console.log("save"),B(!0))}()},children:"Comment"})})}),Object(h.jsx)(S.a,{container:!0,style:{marginTop:30},spacing:15,children:Object(h.jsx)(S.a,{item:!0,xs:9,children:Object(h.jsx)(O.a,{color:"primary",className:"px-4",onClick:function(){N.push("/comments")},children:"Watch all comments"})})}),Object(h.jsx)(S.a,{container:!0,style:{marginTop:30},spacing:15,children:Object(h.jsx)(S.a,{item:!0,xs:9,children:Object(h.jsx)(O.a,{onClick:function(){return b.auth().signOut()},children:"Log out"})})})]})},A=c(126),I=c(127),W=Object(x.a)({root:{minWidth:275},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},title:{fontSize:14,fontWeight:700},pos:{marginBottom:12},container:{marginTop:20}}),B=function(e){var t=W();return Object(h.jsx)("div",{className:t.container,children:Object(h.jsx)(A.a,{children:Object(h.jsxs)(I.a,{children:[Object(h.jsxs)(p.a,{className:t.title,color:"black",gutterBottom:!0,children:["School: ",e.school]}),Object(h.jsxs)(p.a,{className:t.title,color:"black",gutterBottom:!0,children:["HashTag: ",e.subject]}),Object(h.jsx)(p.a,{variant:"body2",component:"p",children:e.message})]})})})},F=function(){var e=Object(n.useState)([]),t=Object(l.a)(e,2),c=t[0],o=t[1],a=(Object(n.useContext)(d).currentUser,Object(i.f)());Object(n.useEffect)((function(){b.firestore().collection("messages").orderBy("created","desc").onSnapshot((function(e){var t=[];e.forEach((function(e){t.push(e.data())})),o(t)}))}),[]);return Object(n.useEffect)((function(){console.log(c)}),[c]),Object(h.jsxs)("div",{children:[Object(h.jsx)(O.a,{color:"primary",className:"px-4",onClick:function(){a.push("improve_school")},children:"Create Comments"}),c.map((function(e,t){return Object(h.jsx)(B,{school:e.school,subject:e.subject,message:e.message})}))]})},N=c(47),P=c(61),E=function(e){var t=e.component,c=Object(P.a)(e,["component"]),o=Object(n.useContext)(d).currentUser;return Object(h.jsx)(i.b,Object(N.a)(Object(N.a)({},c),{},{render:function(e){return o?Object(h.jsx)(t,Object(N.a)({},e)):Object(h.jsx)(i.a,{to:"/login"})}}))};var _=function(){return Object(h.jsx)(m,{children:Object(h.jsx)(r.a,{children:Object(h.jsxs)("div",{className:"App",children:[Object(h.jsx)(E,{exact:!0,path:"/improve_school",component:k}),Object(h.jsx)(i.b,{exact:!0,path:"/comments",component:F}),Object(h.jsx)(i.b,{exact:!0,path:"/login",component:g})]})})})},L=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,132)).then((function(t){var c=t.getCLS,n=t.getFID,o=t.getFCP,a=t.getLCP,s=t.getTTFB;c(e),n(e),o(e),a(e),s(e)}))};s.a.render(Object(h.jsx)(o.a.StrictMode,{children:Object(h.jsx)(_,{})}),document.getElementById("root")),L()}},[[86,1,2]]]);
//# sourceMappingURL=main.3ebf8caa.chunk.js.map